---
layout: post
title: "Enact cli 두 가지 버전 사용기"
date: 2019-09-11
categories: enact
render_with_liquid: false
---

Enact에 국한된 이야기는 아니기에 다른 npm에도 적용할 수 있을 것으로 보입니다.  
@enact/cli 모듈을 사용하던 중 생긴 고민으로 아직도 삽질 중인 문제입니다.

이전 프로젝트에 사용하던 @enact/cli 버전을 현재 프로젝트에 사용하면 문제가 하나 생기는데,
그렇다고 버전을 그냥 올려버리면 이전 프로젝트에 사용시 문제가 발생할 소지가 있습니다.
고민 끝에 두 가지의 버전을 사용하면 어떨까 하는 생각에 들었습니다.
enact가 약간 기존 버전에 대한 배려가 없는 탓인지 알 수 없지만, 어쨌든 이를 위해 `두 가지의 버전을 사용`해야할 필요성이 생겼습니다.

구글링을 통해 원하는 답글을 찾았습니다.
[스택오버플로우 답변][stackoverflow]을 보면 npm install 시에 별칭을 사용할 수 있다고 합니다.

보통 `npm install <package>` 명령어로 설치하는데 뒤에 추가되는 옵션이 있습니다.  
`npm install <alias>@npm:<package>`

사용방법은 간단하고 문제가 하나 있다면 `npm version 6.9.0`부터 지원한다고 합니다. [(NPM Release)][npm-release]  
즉 구버전이면 npm update를 해야한다는 뜻이고, 저는 `구버전(5.5.1)`을 사용하고 있습니다.

`npm install -g npm@latest`

에러가 나서 `sudo`를 붙여서 새로 했습니다.
어쨌든 update를 하고나니 `6.11.3` 버전이네요. 꽤나 높아졌어요.

이제 원래 목표인 별칭을 사용해서 패키지를 설치해보겠습니다.
먼저 현재 사용중인 버전은 `@enact/cli 1.2.0`버전입니다.

기본적으로 아래 명령어를 통해 설치를 하겠지만,  
`sudo npm install -g @enact/cli --unsafe-perm`

별칭을 사용해 설치하겠습니다.  
`sudo npm install -g @enact2/cli@npm:@enact/cli --unsafe-perm`

설치는 정상적으로 되었는데, 사소한 문제가 하나 생겼습니다.
`enact -v`을 통해 버전을 확인할 수 있는데, 예상은 했지만 이게 업데이트 되었습니다.
`/usr/local/bin/` 경로로 들어가 `ll`을 확인해보면 링크가 enact2로 변경된걸 볼 수 있습니다.
제가 원한건 기존것은 그대로 남아있는 상태로 `enact2 -v`추가되는 형태였는데 말이죠.
링크를 수정하고 enact2에 대한 링크를 하나 더 추가해줘야 합니다.

```bash
ln -Tfs [새로바꿀경로] [바꿀심볼릭링크]
ln -Tfs ../lib/node_modules/@enact/cli/bin/enact.js enact
ln -Tfs ../lib/node_modules/@enact2/cli/bin/enact.js enact2
```

일단 원하던 대로 두 가지 버전을 사용할 수 있게되었고, 문제가 해결되는지는 테스트를 좀 더 해봐야겠습니다.

[stackoverflow]: https://stackoverflow.com/questions/26414587/how-to-install-multiple-versions-of-package-using-npm
[npm-release]: https://npm.community/t/release-npm-6-9-0/5911
